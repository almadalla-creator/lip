<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Primer Reader | LIP Editorial</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<header class="site-header">
  <div class="container nav">
    <div class="logo">LIP Editorial</div>
    <nav>
      <a href="index.html">Home</a>
      <a href="primers.html" class="active">Primers</a>
      <a href="books.html">Books</a>
      <a href="editorial.html">Editorial</a>
      <a href="archive.html">Archive</a>
    </nav>
  </div>
</header>

<section class="section">
  <div class="container">
    <h1 id="readerTitle" style="margin:0 0 10px 0;">Primer</h1>
    <p style="margin:0 0 18px 0;">If the PDF preview does not load,open it in a new tab.</p>

    <div class="btn-row" style="justify-content:flex-start;">
      <a id="openPdf" class="btn" href="#" target="_blank" rel="noopener noreferrer">Open in new tab</a>
      <a class="btn btn-ghost" href="primers.html">Back</a>
    </div>

    <div class="pdf-frame">
      <object id="pdfObject" data="" type="application/pdf" width="100%" height="100%">
        <p style="margin:16px;">
          PDF preview not supported in this browser.
          <a id="fallbackLink" href="#" target="_blank" rel="noopener noreferrer">Open in new tab</a>
        </p>
      </object>
    </div>
  </div>
</section>

<script>
  const params = new URLSearchParams(window.location.search);
  const pdfParam = params.get("pdf") || "";
  const title = params.get("title") || "Primer";

  document.getElementById("readerTitle").textContent = title;

  // Normalize to a root-relative URL so embeds don't mis-resolve
  const pdf = pdfParam.startsWith("http")
    ? pdfParam
    : (pdfParam.startsWith("/") ? pdfParam : ("/" + pdfParam));

  document.getElementById("openPdf").href = pdf;
  document.getElementById("pdfObject").data = pdf;
  document.getElementById("fallbackLink").href = pdf;
</script>

</body>
</html>
