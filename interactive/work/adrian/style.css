:root{--bg:#dcdcdc;--paper:#ffffff;--ink:#111;--muted:rgba(17,17,17,.6);--border:rgba(0,0,0,.12);--shadow:rgba(0,0,0,.20);}
html,body{margin:0;padding:0;background:var(--bg);color:var(--ink);}
body{font-family:"EB Garamond",serif;line-height:1.75;letter-spacing:.2px;overflow:hidden;}
.stage{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:24px;box-sizing:border-box;}
.book{position:relative;width:min(900px,94vw);height:min(92vh,720px);background:var(--paper);border:1px solid var(--border);box-shadow:0 30px 90px var(--shadow);border-radius:14px;overflow:hidden;}
.page{position:absolute;inset:0;overflow:auto;padding:64px 64px 86px;box-sizing:border-box;transform-origin:left center;backface-visibility:hidden;}
.page.hidden{display:none;}
.page.turning-out{animation:turnOut .45s ease forwards;}
.page.turning-in{animation:turnIn .45s ease forwards;}
@keyframes turnOut{to{transform:perspective(1400px) rotateY(-92deg);opacity:0;}}
@keyframes turnIn{from{transform:perspective(1400px) rotateY(92deg);opacity:0;}to{transform:perspective(1400px) rotateY(0deg);opacity:1;}}
.page-inner{max-width:720px;margin:0 auto;}
.chapter-title{font-size:14pt;font-weight:700;margin:0 0 12px;}
.chapter-subtitle{font-size:12.5pt;margin:0 0 28px;color:var(--muted);}
p{font-size:12.5pt;margin:0 0 18px;text-align:justify;hyphens:auto;}
.node-title{font-size:14pt;font-weight:700;margin:0 0 14px;}
.node-prompt{font-style:italic;margin:0 0 18px;}
.choices{margin:10px 0 18px;}
.choice{width:100%;display:flex;gap:14px;align-items:flex-start;text-align:left;padding:14px 16px;margin:10px 0;border:1px solid var(--border);border-radius:12px;background:#fff;cursor:pointer;font-family:"EB Garamond",serif;font-size:12.5pt;}
.choice:hover{background:#f3f3f3;}
.choice .k{min-width:24px;font-weight:700;}
.choice .t{flex:1;}
.node-tail{color:var(--muted);font-style:italic;margin-top:14px;}
.nav{position:absolute;left:0;right:0;bottom:0;height:58px;border-top:1px solid var(--border);background:rgba(255,255,255,.92);display:flex;align-items:center;justify-content:space-between;padding:0 14px;box-sizing:border-box;}
.nav-btn{width:44px;height:38px;border:1px solid var(--border);border-radius:10px;background:#fff;cursor:pointer;font-family:inherit;font-size:22px;line-height:1;}
.nav-btn:disabled{opacity:.35;cursor:not-allowed;}
.nav-mid{font-size:12.5pt;color:var(--muted);}
.cover-page{position:absolute;inset:0;background-size:cover;background-position:center;display:flex;align-items:flex-end;justify-content:center;}
.cover-overlay{width:100%;display:flex;justify-content:center;padding:0 0 34px;box-sizing:border-box;}
.start-btn,.replay-btn{border:1px solid var(--border);border-radius:12px;background:rgba(255,255,255,.92);padding:12px 18px;font-family:"EB Garamond",serif;font-size:12.5pt;cursor:pointer;}
.start-btn:hover,.replay-btn:hover{background:#fff;}
.about-toggle{display:inline-block;margin-top:22px;color:var(--muted);text-decoration:none;font-size:12pt;}
.about-toggle:hover{text-decoration:underline;}
.about-panel{margin-top:10px;padding:14px 16px;border:1px solid var(--border);border-radius:12px;background:#fafafa;}
.hidden{display:none;}
.dominant{font-size:13pt;margin-top:18px;}
.projection{margin-top:14px;color:var(--muted);}
@media (max-width:640px){
  .book{height:min(92vh,780px);}
  .page{padding:44px 22px 86px;}
}
